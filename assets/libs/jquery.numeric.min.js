(function(a){a.fn.numeric=function(c,b){if(typeof c==="boolean"){c={decimal:c}}c=c||{};if(typeof c.negative=="undefined"){c.negative=true}var d=(c.decimal===false)?"":c.decimal||".";var e=(c.negative===true)?true:false;var b=typeof b=="function"?b:function(){};return this.data("numeric.decimal",d).data("numeric.negative",e).data("numeric.callback",b).keypress(a.fn.numeric.keypress).keyup(a.fn.numeric.keyup).blur(a.fn.numeric.blur)};a.fn.numeric.keypress=function(d){var c=a.data(this,"numeric.decimal");var g=a.data(this,"numeric.negative");var f=d.charCode?d.charCode:d.keyCode?d.keyCode:0;if(f==13&&this.nodeName.toLowerCase()=="input"){return true}else{if(f==13){return false}}var b=false;if((d.ctrlKey&&f==97)||(d.ctrlKey&&f==65)){return true}if((d.ctrlKey&&f==120)||(d.ctrlKey&&f==88)){return true}if((d.ctrlKey&&f==99)||(d.ctrlKey&&f==67)){return true}if((d.ctrlKey&&f==122)||(d.ctrlKey&&f==90)){return true}if((d.ctrlKey&&f==118)||(d.ctrlKey&&f==86)||(d.shiftKey&&f==45)){return true}if(f<48||f>57){var h=a(this).val();if(h.indexOf("-")!=0&&g&&f==45&&(h.length==0||(a.fn.getSelectionStart(this))==0)){return true}if(c&&f==c.charCodeAt(0)&&h.indexOf(c)!=-1){b=false}if(f!=8&&f!=9&&f!=13&&f!=35&&f!=36&&f!=37&&f!=39&&f!=46){b=false}else{if(typeof d.charCode!="undefined"){if(d.keyCode==d.which&&d.which!=0){b=true;if(d.which==46){b=false}}else{if(d.keyCode!=0&&d.charCode==0&&d.which==0){b=true}}}}if(c&&f==c.charCodeAt(0)){if(h.indexOf(c)==-1){b=true}else{b=false}}}else{b=true}return b};a.fn.numeric.keyup=function(g){var o=a(this).value;if(o&&o.length>0){var b=a.fn.getSelectionStart(this);var d=a.data(this,"numeric.decimal");var n=a.data(this,"numeric.negative");if(d!=""){var f=o.indexOf(d);if(f==0){this.value="0"+o}if(f==1&&o.charAt(0)=="-"){this.value="-0"+o.substring(1)}o=this.value}var q=[0,1,2,3,4,5,6,7,8,9,"-",d];var m=o.length;for(var k=m-1;k>=0;k--){var c=o.charAt(k);if(k!=0&&c=="-"){o=o.substring(0,k)+o.substring(k+1)}else{if(k==0&&!n&&c=="-"){o=o.substring(1)}}var p=false;for(var l=0;l<q.length;l++){if(c==q[l]){p=true;break}}if(!p||c==" "){o=o.substring(0,k)+o.substring(k+1)}}var h=o.indexOf(d);if(h>0){for(var k=m-1;k>h;k--){var c=o.charAt(k);if(c==d){o=o.substring(0,k)+o.substring(k+1)}}}this.value=o;a.fn.setSelection(this,b)}};a.fn.numeric.blur=function(){var c=a.data(this,"numeric.decimal");var b=a.data(this,"numeric.callback");var e=this.value;if(e!=""){var d=new RegExp("^\\d+$|\\d*"+c+"\\d+");if(!d.exec(e)){b.apply(this)}}};a.fn.removeNumeric=function(){return this.data("numeric.decimal",null).data("numeric.negative",null).data("numeric.callback",null).unbind("keypress",a.fn.numeric.keypress).unbind("blur",a.fn.numeric.blur)};a.fn.getSelectionStart=function(b){if(b.createTextRange){var c=document.selection.createRange().duplicate();c.moveEnd("character",b.value.length);if(c.text==""){return b.value.length}return b.value.lastIndexOf(c.text)}else{return b.selectionStart}};a.fn.setSelection=function(b,c){if(typeof c=="number"){c=[c,c]}if(c&&c.constructor==Array&&c.length==2){if(b.createTextRange){var d=b.createTextRange();d.collapse(true);d.moveStart("character",c[0]);d.moveEnd("character",c[1]);d.select()}else{if(b.setSelectionRange){b.focus();b.setSelectionRange(c[0],c[1])}}}}})(jQuery);